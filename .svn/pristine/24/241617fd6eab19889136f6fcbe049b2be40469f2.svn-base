webpackJsonp([1],{GgDs:function(e,t,s){"use strict";var i=s("8+FI"),n=s("gyMJ"),a={data:function(){var e=this;return{collapse:!1,fullscreen:!1,name:"admin",user:{},dialogVisible:!1,editVisible:!1,form:{username:"",password:""},edit:{newpwd:"",oldpwd:"",pwd:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},edit_rules:{oldpwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newpwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],pwd:[{validator:function(t,s,i){return s?s!=e.edit.newpwd?i(new Error("两次密码输入不一致！")):void i():i(new Error("密码不能为空！"))},trigger:"blur"}]}}},created:function(){var e=this;i.a.$on("login",function(t){"login"==t?e.dialogVisible=!0:e.$message.error(t)}),this.user=JSON.parse(sessionStorage.getItem("user")),this.user&&(this.form.username=this.user.username,this.name=this.user.name?this.user.name:"系统管理员")},methods:{handleCommand:function(e){0===e&&(sessionStorage.removeItem("ms_username"),sessionStorage.removeItem("user"),sessionStorage.removeItem("token"),this.$router.push("/login")),1===e&&(this.editVisible=!0)},updatePWD:function(){var e=this;this.$refs.edit.validate(function(t){if(!t)return!1;var s=new FormData;return s.append("oldpwd",e.edit.oldpwd),s.append("pwd",e.edit.pwd),n.c("/common/user/updatepwd",s).then(function(t){t.data&&(e.editVisible=!1,e.$message.success("修改成功"))}),!1})},login:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var s=new FormData;s.append("username",e.form.username),s.append("password",e.form.password);var i=localStorage.getItem("role");return s.append("role",i),n.c("/admin/login",s).then(function(t){t&&200===parseInt(t.code)?(e.dialogVisible=!1,e.$message.success("登录成功")):e.$message.error(t.msg)}),!1})},collapseChage:function(){this.collapse=!this.collapse,i.a.$emit("collapse",this.collapse)},handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("div",{staticClass:"collapse-btn",on:{click:e.collapseChage}},[s("i",{staticClass:"el-icon-menu"})]),e._v(" "),s("div",{staticClass:"logo"},[e._v("内江市总工会奖品兑换管理系统")]),e._v(" "),s("div",{staticClass:"header-right"},[s("div",{staticClass:"header-user-con"},[s("div",{staticClass:"headline",on:{click:function(t){e.handleCommand(1)}}},[s("i",{staticClass:"el-icon-edit-outline"},[e._v("修改密码")])]),e._v(" "),s("div",{staticClass:"headline",on:{click:function(t){e.handleCommand(0)}}},[s("i",{staticClass:"el-icon-logout-qiehuanzuhu"},[e._v("退出")])]),e._v(" "),s("div",{staticClass:"btn-fullscreen",on:{click:e.handleFullScreen}},[s("el-tooltip",{attrs:{effect:"dark",content:e.fullscreen?"取消全屏":"全屏",placement:"bottom"}},[s("i",{staticClass:"el-icon-rank"})])],1)])]),e._v(" "),s("el-dialog",{attrs:{title:"登录",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"账号",prop:"username"}},[s("el-input",{directives:[{name:"mode",rawName:"v-mode",value:e.form.username,expression:"form.username"}]})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"密码修改",visible:e.editVisible,width:"600px"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{ref:"edit",attrs:{model:e.edit,rules:e.edit_rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"旧密码",prop:"oldpwd"}},[s("el-input",{attrs:{type:"password"},model:{value:e.edit.oldpwd,callback:function(t){e.$set(e.edit,"oldpwd",t)},expression:"edit.oldpwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"newpwd"}},[s("el-input",{attrs:{type:"password"},model:{value:e.edit.newpwd,callback:function(t){e.$set(e.edit,"newpwd",t)},expression:"edit.newpwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"重复新密码",prop:"pwd"}},[s("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.updatePWD(t):null}},model:{value:e.edit.pwd,callback:function(t){e.$set(e.edit,"pwd",t)},expression:"edit.pwd"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.updatePWD}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,l,!1,function(e){s("SyxJ")},"data-v-a662596c",null);t.a=o.exports},MpTN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("GgDs"),n=s("8+FI"),a={data:function(){return{collapse:!1,items:[{icon:"el-icon-setting",index:"dashboard",title:"系统首页"},{icon:"el-icon-goods",index:"business",title:"商家管理"},{icon:"el-icon-tickets",index:"activity",title:"奖品管理"},{icon:"el-icon-message",index:"record",title:"奖品领取记录"},{icon:"el-icon-sold-out",index:"adminRecord",title:"兑奖管理"}]}},computed:{onRoutes:function(){return this.$route.path.replace("/","")}},created:function(){var e=this;n.a.$on("collapse",function(t){e.collapse=t})}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sidebar"},[s("el-menu",{staticClass:"sidebar-el-menu",attrs:{"default-active":e.onRoutes,collapse:e.collapse,"unique-opened":"",router:""}},[e._l(e.items,function(t){return[t.subs?[s("el-submenu",{key:t.index,attrs:{index:t.index}},[s("template",{slot:"title"},[s("i",{class:t.icon}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._v(" "),e._l(t.subs,function(t,i){return s("el-menu-item",{key:i,attrs:{index:t.index}},[e._v("\n                        "+e._s(t.title)+"\n                    ")])})],2)]:[s("el-menu-item",{key:t.index,attrs:{index:t.index}},[s("i",{class:t.icon}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]]})],2)],1)},staticRenderFns:[]};var o=s("VU/8")(a,l,!1,function(e){s("zodz")},"data-v-25500363",null).exports,r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showTags?s("div",{staticClass:"tags"},[s("ul",e._l(e.tagsList,function(t,i){return s("li",{key:i,staticClass:"tags-li",class:{active:e.isActive(t.path)}},[s("router-link",{staticClass:"tags-li-title",attrs:{to:t.path}},[e._v("\n                "+e._s(t.title)+"\n            ")]),e._v(" "),s("span",{staticClass:"tags-li-icon",on:{click:function(t){e.closeTags(i)}}},[s("i",{staticClass:"el-icon-close"})])],1)})),e._v(" "),s("div",{staticClass:"tags-close-box"},[s("el-dropdown",{on:{command:e.handleTags}},[s("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n                标签选项"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown",size:"small"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"other"}},[e._v("关闭其他")]),e._v(" "),s("el-dropdown-item",{attrs:{command:"all"}},[e._v("关闭所有")])],1)],1)],1)]):e._e()},staticRenderFns:[]};var c=s("VU/8")({data:function(){return{tagsList:[]}},methods:{isActive:function(e){return e===this.$route.path},closeTags:function(e){var t=this.tagsList.splice(e,1)[0],s=this.tagsList[e]?this.tagsList[e]:this.tagsList[e-1];s?t.path===this.$route.path&&this.$router.push(s.path):this.$router.push("/")},closeAll:function(){this.tagsList=[],this.$router.push("/")},closeOther:function(){var e=this,t=this.tagsList.filter(function(t){return t.path===e.$route.path});this.tagsList=t},setTags:function(e){!this.tagsList.some(function(t){return t.path===e.path})&&this.tagsList.push({title:e.meta.title,path:e.path})},handleTags:function(e){"other"===e?this.closeOther():this.closeAll()}},computed:{showTags:function(){return this.tagsList.length>0}},watch:{$route:function(e,t){this.setTags(e)}},created:function(){this.setTags(this.$route)}},r,!1,function(e){s("XuUs")},null,null).exports,u={data:function(){return{collapse:!1}},components:{vHead:i.a,vSidebar:o,vTags:c},created:function(){var e=this;n.a.$on("collapse",function(t){e.collapse=t})}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("v-head"),this._v(" "),t("v-sidebar"),this._v(" "),t("div",{staticClass:"content-box",class:{"content-collapse":this.collapse}},[t("v-tags"),this._v(" "),t("div",{staticClass:"content"},[t("transition",{attrs:{name:"move",mode:"out-in"}},[t("keep-alive",[t("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]},p=s("VU/8")(u,d,!1,null,null,null);t.default=p.exports},SyxJ:function(e,t){},XuUs:function(e,t){},zodz:function(e,t){}});